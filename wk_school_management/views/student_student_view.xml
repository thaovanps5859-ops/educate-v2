<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2016-Present Webkul Software Pvt. Ltd. (<https://webkul.com/>) -->
<!-- See LICENSE file for full copyright and licensing details. -->
<!-- License URL : https://store.webkul.com/license.html/ -->
<odoo>
    <data>
        <!-- Student Document Type -->
        <record id="wk_student_document_type_form" model="ir.ui.view">
            <field name="name">wk.student.document.type.form</field>
            <field name="model">wk.student.document.type</field>
            <field name="arch" type="xml">
                <form string="Student Document Type">
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <label for="name" string="Name"/>
                                <field name="name" placeholder="Government ID Proof"/>
                            </h1>
                        </div>
                        <group string="Description">
                            <field colspan="2" name="description" nolabel="1" placeholder="Description.."/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="wk_student_document_type_tree" model="ir.ui.view">
            <field name="name">wk.student.document.type.list</field>
            <field name="model">wk.student.document.type</field>
            <field name="arch" type="xml">
                <list string="Document Type">
                    <field name="sequence" widget="handle"/>
                    <field name="name"/>
                    <field name="write_uid"/>
                    <field name="write_date"/>
                </list>
            </field>
        </record>

        <record id="wk_student_document_type_search" model="ir.ui.view">
           <field name="name">wk.student.document.type.search</field>
           <field name="model">wk.student.document.type</field>
           <field name="arch" type="xml">
               <search>
                    <field name="name" filter_domain="[('name', 'ilike', self)]"/>
               </search>
           </field>
        </record>

        <record id="wk_student_document_type_action" model="ir.actions.act_window">
            <field name="name">Document Type</field>
            <field name="res_model">wk.student.document.type</field>
            <field name="view_mode">list,form</field>
            <field name="path">school-student-document</field>
            <field name="view_id" ref="wk_student_document_type_tree"/>
        </record>

        <!-- Student Student -->
        <record id="student_student_form" model="ir.ui.view">
            <field name="name">student.student.form</field>
            <field name="model">student.student</field>
            <field name="arch" type="xml">
                <form string="Student Details">
                    <header invisible="id == False">
                        <button name="%(wk_school_management.action_enroll_student)d" string="Enroll Student" type="action" class="oe_highlight" groups="wk_school_management.wk_school_management_officer_group" invisible='no_enrollments == False'/>
                        <button type="object" name="action_activate_transport" string="Activate Transport" class="oe_highlight" invisible="is_transport_enabled"/>
                        <button type="object" name="action_activate_transport" string="Update Route" class="oe_highlight" invisible="not is_transport_enabled"/>
                        <button type="object" name="action_deactivate_transport" string="Deactivate Transport" class="btn-secondary" invisible="not is_transport_enabled"/>
                    </header>
                    <sheet>     
                        <widget name="web_ribbon" title="Portal" bg_color="text-bg-success" invisible="not student_active"/>               
                        <widget name="web_ribbon" title="Archived" bg_color="text-bg-danger" invisible="active"/>
                        <field name="student_image" widget="image"  class="oe_avatar"/>
                          <div class="oe_title">
                            <h1>
                                <label for="name" string="Student Name"/>
                                <field name="name"/>
                            </h1>
                        </div>
                        <group>
                            <group>
                                <field name="current_enrollment_id"/>
                                <field name="email" widget="email"/>
                                <field name="gender"/>
                                <label for="street" string="Address"/>
                                <div class="o_address_format">
                                    <field name="street" placeholder="Street..." class="o_address_street"/>
                                    <field name="street2" placeholder="Street 2..." class="o_address_street"/>
                                    <field name="city" placeholder="City" class="o_address_city"/>
                                    <field name="state_id" class="o_address_state" placeholder="State" options="{'no_open': True, 'no_quick_create': True}" context="{'default_country_id': country_id}"/>
                                    <field name="zip" placeholder="ZIP" class="o_address_zip"/>
                                    <field name="country_id" placeholder="Country" class="o_address_country" options='{"no_open": True, "no_create": True}'/>
                                </div>
                            </group>
                            <group>
                                <field name="current_grade_id"/>
                                <field name="parent_email" widget="email"/>
                                <field name="dob"/>
                                <field name="mobile" />
                                <field name="no_enrollments" invisible="1"/>
                                <label for="barcode"/>
                                <div class="o_row">
                                    <field name="barcode" readonly="barcode"/>
                                    <button string="Generate" class="btn btn-link" type="object" name="generate_random_barcode" invisible="barcode"
                                        groups="wk_school_management.wk_school_management_officer_group"/>
                                </div>
                                <field name="parent_portal_active" />
                            </group>
                        </group>

                        <group name="parent_details">
                            <group name="father_details" string="Father's Information">
                                <field name="father_name" string="Name"/>
                                <field name="fathers_contact" string="Mobile"/>
                                <field name="fathers_occupation" string="Occupation"/>
                            </group>
                            <group name="mother_details" string="Mother's Information">
                                <field name="mother_name" string="Name"/>
                                <field name="mothers_contact" string="Mobile"/>
                                <field name="mothers_occupation" string="Occupation"/>
                            </group>
                        </group>
                        <group name="transportation_details" string="Transportation Details" invisible="not is_transport_enabled">
                            <group>
                                <field name="location_id" options="{'no_open': True, 'no_quick_create': True}" domain="[('company_id','=', company_id)]" readonly="1"/>
                            </group>
                            <group>
                                <field name="route_id" options="{'no_open': True, 'no_quick_create': True}" readonly="1"/>
                            </group>
                        </group>
                        <notebook>
                            <page string='Enrollments'>
                                <field name="enrollment_ids" readonly='1'/>
                            </page>
                            <page string='Parent Details'>
                                <field name="parent_ids" mode="kanban" context="{'default_is_parent': True,
                                        'default_name':father_name,
                                        'default_email': parent_email,'default_mobile': fathers_contact,
                                        'default_street': street,'default_street2': street2,
                                        'default_zip': zip,'default_city': city,
                                        'default_state_id': state_id,'default_country_id': country_id,}">
                                    <kanban color="color">
                                        <field name="color"/>
                                        <field name="type"/>
                                        <field name="is_company"/>
                                        <templates>
                                            <t t-name="card" class="flex-row">
                                                <aside class="o_kanban_aside_full">
                                                    <field name="avatar_128" class="o_kanban_image_fill w-100" widget="image" options="{'img_class': 'object-fit-cover'}" alt="Contact image"/>
                                                </aside>
                                                <div class="ribbon ribbon-top-right" invisible="not user_ids">
                                                    <span class="text-bg-success">Portal</span>
                                                </div>
                                                <main class="ps-2 ps-md-0">
                                                    <field name="name" class="fw-bold"/>
                                                    <field name="function"/>
                                                    <field name="email" widget="email"/>
                                                    <div t-if="record.type.raw_value != 'contact'">
                                                        <div>
                                                            <field class="me-1" name="zip"/>
                                                            <field name="city"/>
                                                        </div>
                                                        <field class="me-1" name="state_id"/>
                                                        <field name="country_id"/>
                                                    </div>
                                                    <div t-if="record.phone.raw_value">Phone: <field name="phone"/></div>
                                                    <div t-if="record.mobile.raw_value">Mobile: <field name="mobile"/></div>
                                                </main>
                                            </t>
                                        </templates>
                                    </kanban>
                                </field>
                            </page>
                            <page string="Medical Details">
                                <group name="medical_history" string="Medical History">
                                    <group name="medical_history1">
                                        <field name="blood_group"/>
                                        <field name="allergic_food"/>
                                    </group>
                                    <group name="medical_history2">
                                        <field name="allergic_medicine"/>
                                        <field name="known_illness"/>
                                        <field name="student_active" invisible="1"/>
                                        <field name="active" invisible="1"/>
                                    </group>
                                </group>
                            </page>
                            <page string='Other Info'>
                                <group>
                                    <group>
                                        <field name="company_id" options="{'no_open': True, 'no_quick_create': True}" readonly="is_single_company" groups="base.group_multi_company"/>
                                        <field name="user_id" readonly="1" string="Related User" />
                                        <field name="partner_id" string="Related Partner"/>
                                    </group>
                                </group>
                            </page>
                            <page string='Documents'>
                                <field name="attachment_ids" readonly='1' mode="kanban"/>
                            </page>
                        </notebook>
                    </sheet>
                    <chatter/>
                </form>
            </field>
        </record>

        <record id="student_student_tree" model="ir.ui.view">
            <field name="name">student.student.list</field>
            <field name="model">student.student</field>
            <field name="arch" type="xml">
                <list string="Student Name">
                    <field name="name"/>
                    <field name="current_enrollment_id"/>
                    <field name="current_grade_id"/>
                    <field name="email"/>
                    <field name="mobile"/>
                    <field name="gender"/>
                    <field name="company_id" groups="!base.group_multi_company" column_invisible="True"/>
                    <field name="company_id"
                        groups="base.group_multi_company"
                        optional="show"
                        readonly="1"/>
                    <field name="create_date"/>
                    <field name="write_date"/>
                    <field name="create_uid" optional="hide"/>
                    <field name="write_uid"/>
                </list>
            </field>
        </record>

        <record id="student_student_kanban" model="ir.ui.view">
            <field name="name">student.student.kanban</field>
            <field name="model">student.student</field>
            <field name="arch" type="xml">
                <kanban class="o_hr_employee_kanban">
                    <field name="id"/>
                    <field name="name"/>
                    <field name="email"/>
                    <field name="mobile"/>
                    <field name="user_id"/>
                    <field name="parent_portal_active"/>
                    <templates>
                        <t t-name="card" class="flex-row">
                            <aside class="o_kanban_aside_full">
                                <field name="student_image" class="o_kanban_image_fill w-100" widget="image" options="{'img_class': 'object-fit-cover'}" alt="Student image"/>
                            </aside>
                            <div class="ribbon ribbon-top-right" invisible="not student_active">
                                <span class="text-bg-success">Portal</span>
                            </div>
                            <div class="ribbon ribbon-top-right" invisible="active">
                                <span class="text-bg-danger">Archived</span>
                            </div>
                            <main class="ps-2 ps-md-0">
                                <field name="name" class="fw-bold"/>
                                <div t-if="record.current_grade_id.raw_value">
                                    <i class="fa fa-fw me-2 fa-graduation-cap text-primary" title="Current Grade"/>
                                    <field name="current_grade_id"/>
                                </div>
                                <div t-if="record.email.raw_value" class="o_text_overflow">
                                    <i class="fa fa-fw me-2 fa-envelope text-primary" title="Email"/>
                                    <field name="email"/>
                                </div>
                                <div t-if="record.mobile.raw_value">
                                    <i class="fa fa-fw me-2 fa-phone text-primary" title="Mobile"/>
                                    <field name="mobile"/>
                                </div>
                                <field name="parent_ids" widget="many2many_tags"/>
                                <t t-if="record.parent_portal_active.raw_value">
                                    <span class="badge bg-info mt-1 text-white" style="width: fit-content;">
                                       Active Parent Access
                                    </span>
                                </t>
                            </main>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="student_student_search" model="ir.ui.view">
           <field name="name">student.student.search</field>
           <field name="model">student.student</field>
           <field name="arch" type="xml">
               <search>
                    <field name="name" filter_domain="['|','|','|','|', ('email', 'ilike', self), ('name', 'ilike', self),('mobile', 'ilike', self),
                                ('mother_name', 'ilike', self),('father_name', 'ilike', self)]"/>
                    <field name="email"/>
                    <field name="company_id"/>
                    <field name="mobile"/>
                    <filter name="portal_users" string="Portal Users" domain="[('user_id','!=',False)]"/>
                    <filter name="non_portal_users" string="Non Portal Users" domain="[('user_id','=',False)]"/>
                    <separator/>
                    <filter name="active" string="Active" domain="[('active','=',True)]"/>
                    <filter name="archived" string="Archived" domain="[('active','!=',True)]"/>
                    <group expand="0" string="Group by...">
                        <filter name="group_by_gender"  string="Gender" domain="[]" context="{'group_by':'gender'}" />
                        <filter name="group_by_current_grade_id"  string="Current Grade" domain="[]" context="{'group_by':'current_grade_id'}" />
                        <filter name="group_by_school"  string="School" domain="[]" context="{'group_by':'company_id'}" />
                    </group>
               </search>
           </field>
        </record>

        <record id="student_student_action" model="ir.actions.act_window">
            <field name="name">Students</field>
            <field name="res_model">student.student</field>
            <field name="view_mode">kanban,form,list</field>
            <field name="path">school-student</field>
        </record>   
    </data>    
</odoo>    
